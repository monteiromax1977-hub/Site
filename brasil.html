<!DOCTYPE html><html><head><meta charset='utf-8'><script src='https://cdn.tailwindcss.com'></script>
<script>
// Carrega settings.json e aplica IDs do Meta Pixel e GA4 (se fornecidos)
async function loadSettingsAndApply() {
  try {
    const r = await fetch('settings.json', {cache:'no-store'});
    const s = await r.json();
    if (s.pixel_id && window.fbq) {
      try { fbq('init', s.pixel_id); fbq('track', 'PageView'); } catch(e) {}
    }
    if (s.ga_id && window.gtag) {
      try { gtag('config', s.ga_id); } catch(e) {}
    }
  } catch (e) { /* silencioso */ }
}
document.addEventListener('DOMContentLoaded', loadSettingsAndApply);
</script>

</head><body>Em preparação
<script>
// Carrega live.json para o ticker "Ao vivo" e tiras por cidade
async function loadLive() {
  try {
    const r = await fetch('live.json', {cache:'no-store'});
    const data = await r.json();
    // Ticker principal (home)
    const ticker = document.getElementById('live-ticker');
    if (ticker && Array.isArray(data.ticker)) {
      ticker.innerHTML = '';
      data.ticker.forEach(msg => {
        const span = document.createElement('span');
        span.className = 'mx-4';
        span.textContent = msg;
        ticker.appendChild(span);
      });
    }
    // City mini strips
    for (const [key, msgs] of Object.entries(data.city || {})) {
      const el = document.getElementById('live-city-' + key);
      if (el && Array.isArray(msgs)) {
        el.textContent = msgs.join(' • ');
      }
    }
  } catch(e) {
    // silencioso
  }
}
document.addEventListener('DOMContentLoaded', loadLive);
</script>

<script>
// Carrega boletim.json e preenche listas na home e páginas de cidade
async function loadBoletim() {
  try {
    const r = await fetch('boletim.json', {cache:'no-store'});
    const items = await r.json();
    const containers = document.querySelectorAll('[data-boletim]');
    containers.forEach(container => {
      const city = container.getAttribute('data-boletim');
      container.innerHTML = '';
      const ul = document.createElement('ul');
      ul.className = 'space-y-2';
      const filtered = items.filter(x => city === 'all' || x.cidade.toLowerCase().includes(city.toLowerCase()));
      (filtered.length?filtered:items.slice(0,3)).forEach(x => {
        const li = document.createElement('li');
        li.className = 'text-sm';
        li.innerHTML = `<span class="text-slate-500">${x.hora}</span> — <strong>${x.cidade}:</strong> ${x.titulo} <span class="text-slate-500">• ${x.detalhe}</span>`;
        ul.appendChild(li);
      });
      container.appendChild(ul);
    });
  } catch(e) {
    // silencioso
  }
}
document.addEventListener('DOMContentLoaded', loadBoletim);
</script>

</body></html>
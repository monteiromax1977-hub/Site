<!DOCTYPE html><html><head><meta charset='utf-8'><script src='https://cdn.tailwindcss.com'></script>
<script>
// Carrega settings.json e aplica IDs do Meta Pixel e GA4 (se fornecidos)
async function loadSettingsAndApply() {
  try {
    const r = await fetch('settings.json', {cache:'no-store'});
    const s = await r.json();
    if (s.pixel_id && window.fbq) {
      try { fbq('init', s.pixel_id); fbq('track', 'PageView'); } catch(e) {}
    }
    if (s.ga_id && window.gtag) {
      try { gtag('config', s.ga_id); } catch(e) {}
    }
  } catch (e) { /* silencioso */ }
}
document.addEventListener('DOMContentLoaded', loadSettingsAndApply);
</script>

</head><body>Em preparação
<script>
// Widget de clima (Open-Meteo) para Paulo Afonso e Delmiro
async function loadWeather() {
  const places = [
    {id: 'wx-pa', name: 'Paulo Afonso', lat: -9.406, lon: -38.215},
    {id: 'wx-dg', name: 'Delmiro Gouveia', lat: -9.385, lon: -37.998},
  ];
  for (const p of places) {
    const url = `https://api.open-meteo.com/v1/forecast?latitude=${p.lat}&longitude=${p.lon}&current=temperature_2m,wind_speed_10m&timezone=America%2FBahia`;
    try {
      const r = await fetch(url);
      const j = await r.json();
      const t = Math.round(j.current.temperature_2m);
      const w = Math.round(j.current.wind_speed_10m);
      const el = document.getElementById(p.id);
      if (el) el.textContent = `${t}°C • vento ${w} km/h`;
    } catch(e) {
      const el = document.getElementById(p.id);
      if (el) el.textContent = '—';
    }
  }
}
document.addEventListener('DOMContentLoaded', loadWeather);
</script>


<script>
// Carrega live.json para o ticker "Ao vivo" e tiras por cidade
async function loadLive() {
  try {
    const r = await fetch('live.json', {cache:'no-store'});
    const data = await r.json();
    // Ticker principal (home)
    const ticker = document.getElementById('live-ticker');
    if (ticker && Array.isArray(data.ticker)) {
      ticker.innerHTML = '';
      data.ticker.forEach(msg => {
        const span = document.createElement('span');
        span.className = 'mx-4';
        span.textContent = msg;
        ticker.appendChild(span);
      });
    }
    // City mini strips
    for (const [key, msgs] of Object.entries(data.city || {})) {
      const el = document.getElementById('live-city-' + key);
      if (el && Array.isArray(msgs)) {
        el.textContent = msgs.join(' • ');
      }
    }
  } catch(e) {
    // silencioso
  }
}
document.addEventListener('DOMContentLoaded', loadLive);
</script>

<script>
// Carrega boletim.json e preenche listas na home e páginas de cidade
async function loadBoletim() {
  try {
    const r = await fetch('boletim.json', {cache:'no-store'});
    const items = await r.json();
    const containers = document.querySelectorAll('[data-boletim]');
    containers.forEach(container => {
      const city = container.getAttribute('data-boletim');
      container.innerHTML = '';
      const ul = document.createElement('ul');
      ul.className = 'space-y-2';
      const filtered = items.filter(x => city === 'all' || x.cidade.toLowerCase().includes(city.toLowerCase()));
      (filtered.length?filtered:items.slice(0,3)).forEach(x => {
        const li = document.createElement('li');
        li.className = 'text-sm';
        li.innerHTML = `<span class="text-slate-500">${x.hora}</span> — <strong>${x.cidade}:</strong> ${x.titulo} <span class="text-slate-500">• ${x.detalhe}</span>`;
        ul.appendChild(li);
      });
      container.appendChild(ul);
    });
  } catch(e) {
    // silencioso
  }
}
document.addEventListener('DOMContentLoaded', loadBoletim);
</script>

</body></html>
  <hr class="my-8"/>
  <article id="prisao-mandado" class="prose prose-slate dark:prose-invert max-w-none">
    <h2 class="font-head">Prisão por mandado durante abordagem</h2>
    <p><strong>Delmiro Gouveia — 11/08/2025</strong> • <span data-updated></span></p>
    <p>Homem com mandado de prisão em aberto foi localizado pela PM durante ação integrada no município. Caso encaminhado à autoridade policial.</p>
  </article>
